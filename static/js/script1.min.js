$.fn.extend({animateCss:function(b,a){this.addClass("animated "+b);this.one("animationend",function(c){$(this).removeClass("animated "+b);if(a){a()}});return this}});$(document).ready(function(){$(".search-form").on("submit",function(g){g.preventDefault();$search_mode=$("#search-mode");console.log($search_mode);$spinner=$search_mode.find(".js-spinner.product-search-spinner");$spinner.show();var f=$(this).serialize();var d=$(this).attr("action");$search_mode.show();$container=$search_mode.find(".js-results-container");$("#browse-mode").hide();$container.html("");$container.load(d+"?"+f+" #search-results",function(e){c();console.log(e);$spinner.hide();window.history.pushState("object or string","Title",d+"?"+f)})});function b(){$(".product-card-body, .product-link").fancybox({margin:[0,0],animationEffect:"fade",baseClass:"fancybox-overlay js-fix-scroll fancybox-overlay-fixed",btnTpl:{smallBtn:'<a data-fancybox-close class="close-button-base close-button-position-top-right" title="{{CLOSE}}"></a>'},spinnerTpl:'<div id="fancybox-loading"><div id="fancybox-loading-spinner"></div></div>',content:this,afterLoad:function(d){console.log(d);window.history.pushState("object or string","Title",d.current.src)},afterClose:function(){window.history.back()},clickContent:function(g,f){var h=g.opts.$orig.parent();if($(f.target).parents(".CardAction").length||$(f.target).hasClass("CardAction")){f.preventDefault();if($(f.target).parents(".CardAction").length){$btn=$(f.target).parents(".CardAction")}else{$btn=$(f.target)}var d=$btn.attr("href");$.ajax({url:d,contentType:"application/json",success:function(e){console.log(h);if(h.parents(".ProductCard").length){$ico=h.parents(".ProductCard").find(".like-action-link");active_class="is-liked";deactive_class=""}else{active_class="icon-heart-red";deactive_class="icon-heart";$ico=h.find(".like-action-icon")}console.log($ico);$like_count=h.find(".like-action-number");if("added" in e){$btn.addClass("is-liked");$ico.removeClass(deactive_class).addClass(active_class)}else{if("removed" in e){$btn.removeClass("is-liked");$ico.removeClass(active_class).addClass(deactive_class)}}$like_count.text(e.likes_count)}})}}})}function c(){b();$("#items, #search-results").on("click",function(g){console.log("asda");if($(g.target).parents(".like-action-link").length||g.target.className==="like-action-link"){g.preventDefault();console.log("sadas");if(g.target.className==="like-action-link"){$btn=$(g.target)}else{$btn=$(g.target).parents(".like-action-link")}var d=$btn.attr("href");$like_count=$btn.find(".like-action-number");var f="";var h="";if($btn.parents(".ProductCard").length){$ico=$btn;f="is-liked";h=""}else{f="icon-heart-red";h="icon-heart";$ico=$btn.find(".like-action-icon")}console.log($ico);$.ajax({url:d,contentType:"application/json",success:function(e){if("added" in e){$ico.removeClass(h).addClass(f)}else{if("removed" in e){$ico.removeClass(f).addClass(h)}}$like_count.text(e.likes_count)}})}})}c();$("#items, #search-results").on("DOMNodeInserted DOMNodeRemoved",function(d){b()});var a=function(){$(function(){var g,d,i,f,h;return f=!1,g=0.9,i=function(j){if(j.keyCode!==27){}else{if($(".PageHeader-wrapper").hasClass("is-viewingHeaderShare")){return d()}}},h=function(p){var q,m,j,n,e,k;return console.log("click"),m=$(p.target).closest(".js-headerShareCanvas"),e=$("<div class='Scrim Scrim--headerShare'></div>"),n=$(".js-headerShareButton"),k=$(".js-triggerHeaderShare"),q=$(".js-closeButtonAnimateTarget"),j=$(".js-pageHeaderCreatorAvatar"),m.append(e),q.velocity("transition.expandIn",{delay:200,duration:200,display:null}),k.velocity("transition.fadeOut",{duration:200,display:null}),j.velocity({translateY:-32,scale:0.5,opacity:0},{duration:75,display:null,ease:"ease-out"}),n.velocity("transition.expandIn",{delay:150,stagger:25,duration:150,ease:"ease-out",display:null}),e.velocity({opacity:g},{duration:400,ease:"ease-out",begin:function(){return $("body").addClass("is-viewingHeaderShare")},complete:function(){return $("body").on("keyup",i),$("body").on("click",".js-closeHeaderShare",d),$("body").addClass("is-restingHeaderShare")}})},d=function(){var m,n,k,j,l;return f?!0:(f=!0,j=$(".Scrim--headerShare"),l=$(".js-triggerHeaderShare"),m=$(".js-closeButtonAnimateTarget"),k=$(".js-headerShareButton"),n=$(".js-pageHeaderCreatorAvatar"),m.velocity("transition.fadeOut",{duration:200,display:null}),l.velocity("transition.expandIn",{delay:100,duration:200}),n.velocity({translateY:0,scale:1,opacity:1},{delay:150,duration:100,display:null,ease:"ease-out"}),k.velocity("transition.expandOut",{stagger:50,duration:300,display:null,ease:"ease-out",backwards:null,begin:function(){return $("body").removeClass("is-restingHeaderShare")},complete:function(){return $("body").removeClass("is-viewingHeaderShare"),$("body").off("click",".js-closeHeaderShare",d),$("body").off("keyup",i),j.remove(),f=!1}}),j.velocity({opacity:0},{duration:400,ease:"ease-out"}))},$("body").on("click",".js-triggerHeaderShare",h)})}.call(this)});