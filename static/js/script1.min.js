$.fn.extend({animateCss:function(b,a){this.addClass("animated "+b);this.one("animationend",function(c){$(this).removeClass("animated "+b);if(a){a()}});return this}});$(document).ready(function(){$("#modal-window .close").on("click",function(){var a=$(this).parent().parent();a.animateCss("fadeOut",function(){a.removeClass("visible transition")});$("body").removeClass("dimmed")});$("#modal-content").on("click",function(b){b.preventDefault();if(b.target.id=="like-button"||$(b.target).parents("#like-button")){b.preventDefault();if(b.target.id=="like-button"){$btn=$(b.target)}else{$btn=$(b.target).parents("#like-button")}var a=$btn.attr("href");$.ajax({url:a,contentType:"application/json",success:function(e){$icon=$btn.find(".icon");if("added" in e){$icon.addClass("active")}else{if("removed" in e){$icon.removeClass("active")}}var c=$('.product-grid-link[data-id = "'+$btn.attr("data-id")+'"]').find(".love-this-count");console.log(c);var d=e.likes_count;c.each(function(){$(this).html(""+d)})}})}});$("#items").on("click",function(b){console.log(b.target);if($(b.target).parents(".product-grid-link")){b.preventDefault();$parent=$(b.target).parents(".product-grid-link");var a=$parent.attr("href");$.ajax({url:a,success:function(c){$("#modal-content").html(c);$("#modal-window").addClass("visible transition").animateCss("fadeIn");$("body").addClass("dimmed")},error:function(c){console.log(c);if(c.status==404){alert("Данный товар не найден")}else{if(c.status==500){alert("Извините за временные неудобства, попробуйте позже")}}}})}})});