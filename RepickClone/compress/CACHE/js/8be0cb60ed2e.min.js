"use strict";(function(a){if(typeof(String.prototype.trim)==="undefined"){String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}}a.fn.endlessPaginate=function(b){var e={containerSelector:".endless_container",loadingSelector:".endless_loading",moreSelector:"a.endless_more",pageSelector:".endless_page_template",pagesSelector:"a.endless_page_link",onClick:function(){},onCompleted:function(){},paginateOnScroll:false,paginateOnScrollMargin:1,paginateOnScrollChunkSize:0},d=a.extend(e,b);var c=function(f){return{key:f.data("el-querystring-key").split(" ")[0],url:f.attr("href")}};return this.each(function(){var g=a(this),f=1;g.on("click",d.moreSelector,function(){var m=a(this),l=m.get(0),j=m.closest(d.containerSelector),o=j.find(d.loadingSelector);if(o.is(":visible")){return false}m.hide();o.show();var k=c(m);if(d.onClick.apply(l,[k])!==false){var n="querystring_key="+k.key;a.get(k.url,n,function(p){j.before(p);j.remove();f+=1;d.onCompleted.apply(l,[k,p.trim()])})}return false});if(d.paginateOnScroll){var i=a(window),h=a(document);h.scroll(function(){if(h.height()-i.height()-i.scrollTop()<=d.paginateOnScrollMargin){var j=d.paginateOnScrollChunkSize;if(!j||f%j){g.find(d.moreSelector).click()}else{g.find(d.moreSelector).addClass("endless_chunk_complete")}}})}g.on("click",d.pagesSelector,function(){var m=a(this),l=m.get(0),k=c(m);if(d.onClick.apply(l,[k])!==false){var j=m.closest(d.pageSelector),n="querystring_key="+k.key;j.load(k.url,n,function(o){d.onCompleted.apply(l,[k,o.trim()])})}return false})})};a.endlessPaginate=function(b){return a("body").endlessPaginate(b)}})(jQuery);$.endlessPaginate({paginateOnScroll:true,paginateOnScrollMargin:200});