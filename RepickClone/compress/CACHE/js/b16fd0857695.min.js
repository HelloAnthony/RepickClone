(function(r,p,v,y){if(!v){return}if(v.fn.fancybox){v.error("fancyBox already initialized");return}var w={loop:false,margin:[44,0],gutter:50,keyboard:true,arrows:true,infobar:false,toolbar:true,buttons:["slideShow","fullScreen","thumbs","close"],idleTime:4,smallBtn:"auto",protect:false,modal:false,image:{preload:"auto"},ajax:{settings:{data:{fancybox:true}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:true,css:{},attr:{scrolling:"auto"}},animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><button data-fancybox-prev title="{{PREV}}" class="fancybox-button fancybox-button--left"></button><div class="fancybox-infobar__body"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><button data-fancybox-next title="{{NEXT}}" class="fancybox-button fancybox-button--right"></button></div><div class="fancybox-toolbar">{{BUTTONS}}</div><div class="fancybox-navigation"><button data-fancybox-prev title="{{PREV}}" class="fancybox-arrow fancybox-arrow--left" /><button data-fancybox-next title="{{NEXT}}" class="fancybox-arrow fancybox-arrow--right" /></div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"></button>',fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"></button>',thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>'},parentEl:"body",autoFocus:true,backFocus:true,trapFocus:true,fullScreen:{autoStart:false},touch:{vertical:true,momentum:true},hash:null,media:{},slideShow:{autoStart:false,speed:4000},thumbs:{autoStart:false,hideOnClose:true},onInit:v.noop,beforeLoad:v.noop,afterLoad:v.noop,beforeShow:v.noop,afterShow:v.noop,beforeClose:v.noop,afterClose:v.noop,onActivate:v.noop,onDeactivate:v.noop,clickContent:function(a,b){return a.type==="image"?"zoom":false},clickSlide:"close",clickOutside:"close",dblclickContent:false,dblclickSlide:false,dblclickOutside:false,mobile:{clickContent:function(a,b){return a.type==="image"?"toggleControls":false},clickSlide:function(a,b){return a.type==="image"?"toggleControls":"close"},dblclickContent:function(a,b){return a.type==="image"?"zoom":false},dblclickSlide:function(a,b){return a.type==="image"?"zoom":false}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder"}}};var q=v(r);var t=v(p);var o=0;var s=function(a){return a&&a.hasOwnProperty&&a instanceof v};var z=(function(){return r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||function(a){return r.setTimeout(a,1000/60)}})();var B=(function(){var c,b=p.createElement("fakeelement");var a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(c in a){if(b.style[c]!==y){return a[c]}}})();var x=function(a){return(a&&a.length&&a[0].offsetHeight)};var A=function(a,b,c){var d=this;d.opts=v.extend(true,{index:c},w,b||{});if(b&&v.isArray(b.buttons)){d.opts.buttons=b.buttons}d.id=d.opts.id||++o;d.group=[];d.currIndex=parseInt(d.opts.index,10)||0;d.prevIndex=null;d.prevPos=null;d.currPos=0;d.firstRun=null;d.createGroup(a);if(!d.group.length){return}d.$lastFocus=v(p.activeElement).blur();d.slides={};d.init(a)};v.extend(A.prototype,{init:function(){var e=this;var b,a,d;var c=e.group[e.currIndex].opts;e.scrollTop=t.scrollTop();e.scrollLeft=t.scrollLeft();if(!v.fancybox.getInstance()&&!v.fancybox.isMobile&&v("body").css("overflow")!=="hidden"){b=v("body").width();v("html").addClass("fancybox-enabled");b=v("body").width()-b;if(b>1){v("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar, .fancybox-enabled body { margin-right: '+b+"px; }</style>")}}d="";v.each(c.buttons,function(g,f){d+=(c.btnTpl[f]||"")});a=v(e.translate(e,c.baseTpl.replace("{{BUTTONS}}",d))).addClass("fancybox-is-hidden").attr("id","fancybox-container-"+e.id).addClass(c.baseClass).data("FancyBox",e).prependTo(c.parentEl);e.$refs={container:a};["bg","inner","infobar","toolbar","stage","caption"].forEach(function(f){e.$refs[f]=a.find(".fancybox-"+f)});if(!c.arrows||e.group.length<2){a.find(".fancybox-navigation").remove()}if(!c.infobar){e.$refs.infobar.remove()}if(!c.toolbar){e.$refs.toolbar.remove()}e.trigger("onInit");e.activate();e.jumpTo(e.currIndex)},translate:function(b,a){var c=b.opts.i18n[b.opts.lang];return a.replace(/\{\{(\w+)\}\}/g,function(f,d){var e=c[d];if(e===y){return f}return e})},createGroup:function(a){var b=this;var c=v.makeArray(a);v.each(c,function(i,e){var k={},l={},j=[],f,g,d,h;if(v.isPlainObject(e)){k=e;l=e.opts||e}else{if(v.type(e)==="object"&&v(e).length){f=v(e);j=f.data();l="options" in j?j.options:{};l=v.type(l)==="object"?l:{};k.src="src" in j?j.src:(l.src||f.attr("href"));["width","height","thumb","type","filter"].forEach(function(m){if(m in j){l[m]=j[m]}});if("srcset" in j){l.image={srcset:j.srcset}}l.$orig=f;if(!k.type&&!k.src){k.type="inline";k.src=e}}else{k={type:"html",src:e+""}}}k.opts=v.extend(true,{},b.opts,l);if(v.fancybox.isMobile){k.opts=v.extend(true,{},k.opts,k.opts.mobile)}g=k.type||k.opts.type;d=k.src||"";if(!g&&d){if(d.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)){g="image"}else{if(d.match(/\.(pdf)((\?|#).*)?$/i)){g="pdf"}else{if(d.charAt(0)==="#"){g="inline"}}}}k.type=g;k.index=b.group.length;if(k.opts.$orig&&!k.opts.$orig.length){delete k.opts.$orig}if(!k.opts.$thumb&&k.opts.$orig){k.opts.$thumb=k.opts.$orig.find("img:first")}if(k.opts.$thumb&&!k.opts.$thumb.length){delete k.opts.$thumb}if(v.type(k.opts.caption)==="function"){k.opts.caption=k.opts.caption.apply(e,[b,k])}else{if("caption" in j){k.opts.caption=j.caption}}k.opts.caption=k.opts.caption===y?"":k.opts.caption+"";if(g==="ajax"){h=d.split(/\s+/,2);if(h.length>1){k.src=h.shift();k.opts.filter=h.shift()}}if(k.opts.smallBtn=="auto"){if(v.inArray(g,["html","inline","ajax"])>-1){k.opts.toolbar=false;k.opts.smallBtn=true}else{k.opts.smallBtn=false}}if(g==="pdf"){k.type="iframe";k.opts.iframe.preload=false}if(k.opts.modal){k.opts=v.extend(true,k.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:false,clickSlide:false,clickOutside:false,dblclickContent:false,dblclickSlide:false,dblclickOutside:false})}b.group.push(k)})},addEvents:function(){var a=this;a.removeEvents();a.$refs.container.on("click.fb-close","[data-fancybox-close]",function(b){b.stopPropagation();b.preventDefault();a.close(b)}).on("click.fb-prev touchend.fb-prev","[data-fancybox-prev]",function(b){b.stopPropagation();b.preventDefault();a.previous()}).on("click.fb-next touchend.fb-next","[data-fancybox-next]",function(b){b.stopPropagation();b.preventDefault();a.next()});q.on("orientationchange.fb resize.fb",function(b){if(b&&b.originalEvent&&b.originalEvent.type==="resize"){z(function(){a.update()})}else{a.$refs.stage.hide();setTimeout(function(){a.$refs.stage.show();a.update()},500)}});t.on("focusin.fb",function(b){var c=v.fancybox?v.fancybox.getInstance():null;if(c.isClosing||!c.current||!c.current.opts.trapFocus||v(b.target).hasClass("fancybox-container")||v(b.target).is(p)){return}if(c&&v(b.target).css("position")!=="fixed"&&!c.$refs.container.has(b.target).length){b.stopPropagation();c.focus();q.scrollTop(a.scrollTop).scrollLeft(a.scrollLeft)}});t.on("keydown.fb",function(b){var c=a.current,d=b.keyCode||b.which;if(!c||!c.opts.keyboard){return}if(v(b.target).is("input")||v(b.target).is("textarea")){return}if(d===8||d===27){b.preventDefault();a.close(b);return}if(d===37||d===38){b.preventDefault();a.previous();return}if(d===39||d===40){b.preventDefault();a.next();return}a.trigger("afterKeydown",b,d)});if(a.group[a.currIndex].opts.idleTime){a.idleSecondsCounter=0;t.on("mousemove.fb-idle mouseenter.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(){a.idleSecondsCounter=0;if(a.isIdle){a.showControls()}a.isIdle=false});a.idleInterval=r.setInterval(function(){a.idleSecondsCounter++;if(a.idleSecondsCounter>=a.group[a.currIndex].opts.idleTime){a.isIdle=true;a.idleSecondsCounter=0;a.hideControls()}},1000)}},removeEvents:function(){var a=this;q.off("orientationchange.fb resize.fb");t.off("focusin.fb keydown.fb .fb-idle");this.$refs.container.off(".fb-close .fb-prev .fb-next");if(a.idleInterval){r.clearInterval(a.idleInterval);a.idleInterval=null}},previous:function(a){return this.jumpTo(this.currPos-1,a)},next:function(a){return this.jumpTo(this.currPos+1,a)},jumpTo:function(g,c,a){var e=this,i,b,j,l,d,k,f;var h=e.group.length;if(e.isSliding||e.isClosing||(e.isAnimating&&e.firstRun)){return}g=parseInt(g,10);b=e.current?e.current.opts.loop:e.opts.loop;if(!b&&(g<0||g>=h)){return false}i=e.firstRun=(e.firstRun===null);if(h<2&&!i&&!!e.isSliding){return}l=e.current;e.prevIndex=e.currIndex;e.prevPos=e.currPos;j=e.createSlide(g);if(h>1){if(b||j.index>0){e.createSlide(g-1)}if(b||j.index<h-1){e.createSlide(g+1)}}e.current=j;e.currIndex=j.index;e.currPos=j.pos;e.trigger("beforeShow",i);e.updateControls();k=v.fancybox.getTranslate(j.$slide);j.isMoved=(k.left!==0||k.top!==0)&&!j.$slide.hasClass("fancybox-animated");j.forcedDuration=y;if(v.isNumeric(c)){j.forcedDuration=c}else{c=j.opts[i?"animationDuration":"transitionDuration"]}c=parseInt(c,10);if(i){if(j.opts.animationEffect&&c){e.$refs.container.css("transition-duration",c+"ms")}e.$refs.container.removeClass("fancybox-is-hidden");x(e.$refs.container);e.$refs.container.addClass("fancybox-is-open");j.$slide.addClass("fancybox-slide--current");e.loadSlide(j);e.preload();return}v.each(e.slides,function(n,m){v.fancybox.stop(m.$slide)});j.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current");if(j.isMoved){d=Math.round(j.$slide.width());v.each(e.slides,function(D,m){var n=m.pos-j.pos;v.fancybox.animate(m.$slide,{top:0,left:(n*d)+(n*m.opts.gutter)},c,function(){m.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous");if(m.pos===e.currPos){j.isMoved=false;e.complete()}})})}else{e.$refs.stage.children().removeAttr("style")}if(j.isLoaded){e.revealContent(j)}else{e.loadSlide(j)}e.preload();if(l.pos===j.pos){return}f="fancybox-slide--"+(l.pos>j.pos?"next":"previous");l.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous");l.isComplete=false;if(!c||(!j.isMoved&&!j.opts.transitionEffect)){return}if(j.isMoved){l.$slide.addClass(f)}else{f="fancybox-animated "+f+" fancybox-fx-"+j.opts.transitionEffect;v.fancybox.animate(l.$slide,f,c,function(){l.$slide.removeClass(f).removeAttr("style")})}},createSlide:function(a){var d=this;var b;var c;c=a%d.group.length;c=c<0?d.group.length+c:c;if(!d.slides[a]&&d.group[c]){b=v('<div class="fancybox-slide"></div>').appendTo(d.$refs.stage);d.slides[a]=v.extend(true,{},d.group[c],{pos:a,$slide:b,isLoaded:false});d.updateSlide(d.slides[a])}return d.slides[a]},scaleToActual:function(e,i,b){var F=this;var m=F.current;var k=m.$content;var l,f,h,a,d;var c=parseInt(m.$slide.width(),10);var n=parseInt(m.$slide.height(),10);var g=m.width;var j=m.height;if(!(m.type=="image"&&!m.hasError)||!k||F.isAnimating){return}v.fancybox.stop(k);F.isAnimating=true;e=e===y?c*0.5:e;i=i===y?n*0.5:i;l=v.fancybox.getTranslate(k);a=g/l.width;d=j/l.height;f=(c*0.5-g*0.5);h=(n*0.5-j*0.5);if(g>c){f=l.left*a-((e*a)-e);if(f>0){f=0}if(f<c-g){f=c-g}}if(j>n){h=l.top*d-((i*d)-i);if(h>0){h=0}if(h<n-j){h=n-j}}F.updateCursor(g,j);v.fancybox.animate(k,{top:h,left:f,scaleX:a,scaleY:d},b||330,function(){F.isAnimating=false});if(F.SlideShow&&F.SlideShow.isActive){F.SlideShow.stop()}},scaleToFit:function(a){var d=this;var b=d.current;var c=b.$content;var e;if(!(b.type=="image"&&!b.hasError)||!c||d.isAnimating){return}v.fancybox.stop(c);d.isAnimating=true;e=d.getFitPos(b);d.updateCursor(e.width,e.height);v.fancybox.animate(c,{top:e.top,left:e.left,scaleX:e.width/c.width(),scaleY:e.height/c.height()},a||330,function(){d.isAnimating=false})},getFitPos:function(k){var e=this;var i=k.$content;var h=k.width;var g=k.height;var b=k.opts.margin;var c,a,j,d,f;if(!i||!i.length||(!h&&!g)){return false}if(v.type(b)==="number"){b=[b,b]}if(b.length==2){b=[b[0],b[1],b[0],b[1]]}if(q.width()<800){b=[0,0,0,0]}c=parseInt(e.$refs.stage.width(),10)-(b[1]+b[3]);a=parseInt(e.$refs.stage.height(),10)-(b[0]+b[2]);j=Math.min(1,c/h,a/g);d=Math.floor(j*h);f=Math.floor(j*g);return{top:Math.floor((a-f)*0.5)+b[0],left:Math.floor((c-d)*0.5)+b[3],width:d,height:f}},update:function(){var a=this;v.each(a.slides,function(b,c){a.updateSlide(c)})},updateSlide:function(c){var b=this;var a=c.$content;if(a&&(c.width||c.height)){v.fancybox.stop(a);v.fancybox.setTranslate(a,b.getFitPos(c));if(c.pos===b.currPos){b.updateCursor()}}c.$slide.trigger("refresh");b.trigger("onUpdate",c)},updateCursor:function(d,c){var e=this;var b;var a=e.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");if(!e.current||e.isClosing){return}if(e.isZoomable()){a.addClass("fancybox-is-zoomable");if(d!==y&&c!==y){b=d<e.current.width&&c<e.current.height}else{b=e.isScaledDown()}if(b){a.addClass("fancybox-can-zoomIn")}else{if(e.current.opts.touch){a.addClass("fancybox-can-drag")}else{a.addClass("fancybox-can-zoomOut")}}}else{if(e.current.opts.touch){a.addClass("fancybox-can-drag")}}},isZoomable:function(){var b=this;var a=b.current;var c;if(!a||b.isClosing){return}if(a.type==="image"&&a.isLoaded&&!a.hasError&&(a.opts.clickContent==="zoom"||(v.isFunction(a.opts.clickContent)&&a.opts.clickContent(a)==="zoom"))){c=b.getFitPos(a);if(a.width>c.width||a.height>c.height){return true}}return false},isScaledDown:function(){var d=this;var a=d.current;var c=a.$content;var b=false;if(c){b=v.fancybox.getTranslate(c);b=b.width<a.width||b.height<a.height}return b},canPan:function(){var d=this;var a=d.current;var c=a.$content;var b=false;if(c){b=d.getFitPos(a);b=Math.abs(c.width()-b.width)>1||Math.abs(c.height()-b.height)>1}return b},loadSlide:function(d){var c=this,b,a;var e;if(d.isLoading){return}if(d.isLoaded){return}d.isLoading=true;c.trigger("beforeLoad",d);b=d.type;a=d.$slide;a.off("refresh").trigger("onReset").addClass("fancybox-slide--"+(b||"unknown")).addClass(d.opts.slideClass);switch(b){case"image":c.setImage(d);break;case"iframe":c.setIframe(d);break;case"html":c.setContent(d,d.src||d.content);break;case"inline":if(v(d.src).length){c.setContent(d,v(d.src))}else{c.setError(d)}break;case"ajax":c.showLoading(d);e=v.ajax(v.extend({},d.opts.ajax.settings,{url:d.src,success:function(g,f){if(f==="success"){c.setContent(d,g)}},error:function(g,f){if(g&&f!=="abort"){c.setError(d)}}}));a.one("onReset",function(){e.abort()});break;default:c.setError(d);break}return true},setImage:function(i){var f=this;var b=i.opts.image.srcset;var e,h,g,c;if(b){g=r.devicePixelRatio||1;c=r.innerWidth*g;h=b.split(",").map(function(k){var j={};k.trim().split(/\s+/).forEach(function(l,m){var n=parseInt(l.substring(0,l.length-1),10);if(m===0){return(j.url=l)}if(n){j.value=n;j.postfix=l[l.length-1]}});return j});h.sort(function(k,j){return k.value-j.value});for(var a=0;a<h.length;a++){var d=h[a];if((d.postfix==="w"&&d.value>=c)||(d.postfix==="x"&&d.value>=g)){e=d;break}}if(!e&&h.length){e=h[h.length-1]}if(e){i.src=e.url;if(i.width&&i.height&&e.postfix=="w"){i.height=(i.width/i.height)*e.value;i.width=e.value}}}i.$content=v('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(i.$slide);if(i.opts.preload!==false&&i.opts.width&&i.opts.height&&(i.opts.thumb||i.opts.$thumb)){i.width=i.opts.width;i.height=i.opts.height;i.$ghost=v("<img />").one("error",function(){v(this).remove();i.$ghost=null;f.setBigImage(i)}).one("load",function(){f.afterLoad(i);f.setBigImage(i)}).addClass("fancybox-image").appendTo(i.$content).attr("src",i.opts.thumb||i.opts.$thumb.attr("src"))}else{f.setBigImage(i)}},setBigImage:function(c){var b=this;var a=v("<img />");c.$image=a.one("error",function(){b.setError(c)}).one("load",function(){clearTimeout(c.timouts);c.timouts=null;if(b.isClosing){return}c.width=this.naturalWidth;c.height=this.naturalHeight;if(c.opts.image.srcset){a.attr("sizes","100vw").attr("srcset",c.opts.image.srcset)}b.hideLoading(c);if(c.$ghost){c.timouts=setTimeout(function(){c.timouts=null;c.$ghost.hide()},Math.min(300,Math.max(1000,c.height/1600)))}else{b.afterLoad(c)}}).addClass("fancybox-image").attr("src",c.src).appendTo(c.$content);if(a[0].complete){a.trigger("load")}else{if(a[0].error){a.trigger("error")}else{c.timouts=setTimeout(function(){if(!a[0].complete&&!c.hasError){b.showLoading(c)}},100)}}},setIframe:function(e){var d=this,c=e.opts.iframe,a=e.$slide,b;e.$content=v('<div class="fancybox-content'+(c.preload?" fancybox-is-hidden":"")+'"></div>').css(c.css).appendTo(a);b=v(c.tpl.replace(/\{rnd\}/g,new Date().getTime())).attr(c.attr).appendTo(e.$content);if(c.preload){d.showLoading(e);b.on("load.fb error.fb",function(f){this.isReady=1;e.$slide.trigger("refresh");d.afterLoad(e)});a.on("refresh.fb",function(){var i=e.$content,f,l,g,j,h;if(b[0].isReady!==1){return}try{f=b.contents();l=f.find("body")}catch(k){}if(l&&l.length&&!(c.css.width!==y&&c.css.height!==y)){g=b[0].contentWindow.document.documentElement.scrollWidth;j=Math.ceil(l.outerWidth(true)+(i.width()-g));h=Math.ceil(l.outerHeight(true));i.css({width:c.css.width===y?j+(i.outerWidth()-i.innerWidth()):c.css.width,height:c.css.height===y?h+(i.outerHeight()-i.innerHeight()):c.css.height})}i.removeClass("fancybox-is-hidden")})}else{this.afterLoad(e)}b.attr("src",e.src);if(e.opts.smallBtn===true){e.$content.prepend(d.translate(e,e.opts.btnTpl.smallBtn))}a.one("onReset",function(){try{v(this).find("iframe").hide().attr("src","//about:blank")}catch(f){}v(this).empty();e.isLoaded=false})},setContent:function(c,a){var b=this;if(b.isClosing){return}b.hideLoading(c);c.$slide.empty();if(s(a)&&a.parent().length){a.parent(".fancybox-slide--inline").trigger("onReset");c.$placeholder=v("<div></div>").hide().insertAfter(a);a.css("display","inline-block")}else{if(!c.hasError){if(v.type(a)==="string"){a=v("<div>").append(v.trim(a)).contents();if(a[0].nodeType===3){a=v("<div>").html(a)}}if(c.opts.filter){a=v("<div>").html(a).find(c.opts.filter)}}}c.$slide.one("onReset",function(){if(c.$placeholder){c.$placeholder.after(a.hide()).remove();c.$placeholder=null}if(c.$smallBtn){c.$smallBtn.remove();c.$smallBtn=null}if(!c.hasError){v(this).empty();c.isLoaded=false}});c.$content=v(a).appendTo(c.$slide);if(c.opts.smallBtn&&!c.$smallBtn){c.$smallBtn=v(b.translate(c,c.opts.btnTpl.smallBtn)).appendTo(c.$content)}this.afterLoad(c)},setError:function(a){a.hasError=true;a.$slide.removeClass("fancybox-slide--"+a.type);this.setContent(a,this.translate(a,a.opts.errorTpl))},showLoading:function(b){var a=this;b=b||a.current;if(b&&!b.$spinner){b.$spinner=v(a.opts.spinnerTpl).appendTo(b.$slide)}},hideLoading:function(b){var a=this;b=b||a.current;if(b&&b.$spinner){b.$spinner.remove();delete b.$spinner}},afterLoad:function(b){var a=this;if(a.isClosing){return}b.isLoading=false;b.isLoaded=true;a.trigger("afterLoad",b);a.hideLoading(b);if(b.opts.protect&&b.$content&&!b.hasError){b.$content.on("contextmenu.fb",function(c){if(c.button==2){c.preventDefault()}return true});if(b.type==="image"){v('<div class="fancybox-spaceball"></div>').appendTo(b.$content)}}a.revealContent(b)},revealContent:function(i){var f=this;var a=i.$slide;var e,g,c,h,b,d=false;e=i.opts[f.firstRun?"animationEffect":"transitionEffect"];c=i.opts[f.firstRun?"animationDuration":"transitionDuration"];c=parseInt(i.forcedDuration===y?c:i.forcedDuration,10);if(i.isMoved||i.pos!==f.currPos||!c){e=false}if(e==="zoom"&&!(i.pos===f.currPos&&c&&i.type==="image"&&!i.hasError&&(d=f.getThumbPos(i)))){e="fade"}if(e==="zoom"){b=f.getFitPos(i);b.scaleX=b.width/d.width;b.scaleY=b.height/d.height;delete b.width;delete b.height;h=i.opts.zoomOpacity;if(h=="auto"){h=Math.abs(i.width/i.height-d.width/d.height)>0.1}if(h){d.opacity=0.1;b.opacity=1}v.fancybox.setTranslate(i.$content.removeClass("fancybox-is-hidden"),d);x(i.$content);v.fancybox.animate(i.$content,b,c,function(){f.complete()});return}f.updateSlide(i);if(!e){x(a);i.$content.removeClass("fancybox-is-hidden");if(i.pos===f.currPos){f.complete()}return}v.fancybox.stop(a);g="fancybox-animated fancybox-slide--"+(i.pos>f.prevPos?"next":"previous")+" fancybox-fx-"+e;a.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(g);i.$content.removeClass("fancybox-is-hidden");x(a);v.fancybox.animate(a,"fancybox-slide--current",c,function(j){a.removeClass(g).removeAttr("style");if(i.pos===f.currPos){f.complete()}},true)},getThumbPos:function(f){var e=this;var b=false;var d=function(l){var h=l[0];var i=h.getBoundingClientRect();var j=[];var k;while(h.parentElement!==null){if(v(h.parentElement).css("overflow")==="hidden"||v(h.parentElement).css("overflow")==="auto"){j.push(h.parentElement.getBoundingClientRect())}h=h.parentElement}k=j.every(function(m){var n=Math.min(i.right,m.right)-Math.max(i.left,m.left);var D=Math.min(i.bottom,m.bottom)-Math.max(i.top,m.top);return n>0&&D>0});return k&&i.bottom>0&&i.right>0&&i.left<v(r).width()&&i.top<v(r).height()};var a=f.opts.$thumb;var c=a?a.offset():0;var g;if(c&&a[0].ownerDocument===p&&d(a)){g=e.$refs.stage.offset();b={top:c.top-g.top+parseFloat(a.css("border-top-width")||0),left:c.left-g.left+parseFloat(a.css("border-left-width")||0),width:a.width(),height:a.height(),scaleX:1,scaleY:1}}return b},complete:function(){var c=this;var a=c.current;var b={};if(a.isMoved||!a.isLoaded||a.isComplete){return}a.isComplete=true;a.$slide.siblings().trigger("onReset");x(a.$slide);a.$slide.addClass("fancybox-slide--complete");v.each(c.slides,function(d,e){if(e.pos>=c.currPos-1&&e.pos<=c.currPos+1){b[e.pos]=e}else{if(e){v.fancybox.stop(e.$slide);e.$slide.unbind().remove()}}});c.slides=b;c.updateCursor();c.trigger("afterShow");if(v(p.activeElement).is("[disabled]")||(a.opts.autoFocus&&!(a.type=="image"||a.type==="iframe"))){c.focus()}},preload:function(){var c=this;var b,a;if(c.group.length<2){return}b=c.slides[c.currPos+1];a=c.slides[c.currPos-1];if(b&&b.type==="image"){c.loadSlide(b)}if(a&&a.type==="image"){c.loadSlide(a)}},focus:function(){var a=this.current;var b;if(this.isClosing){return}b=a&&a.isComplete?a.$slide.find("button,:input,[tabindex],a").filter(":not([disabled]):visible:first"):null;b=b&&b.length?b:this.$refs.container;b.focus()},activate:function(){var a=this;v(".fancybox-container").each(function(){var b=v(this).data("FancyBox");if(b&&b.uid!==a.uid&&!b.isClosing){b.trigger("onDeactivate")}});if(a.current){if(a.$refs.container.index()>0){a.$refs.container.prependTo(p.body)}a.updateControls()}a.trigger("onActivate");a.addEvents()},close:function(j,h){var f=this;var i=f.current;var e,b;var g,k,d,c;var a=function(){f.cleanUp(j)};if(f.isClosing){return false}f.isClosing=true;if(f.trigger("beforeClose",j)===false){f.isClosing=false;z(function(){f.update()});return false}f.removeEvents();if(i.timouts){clearTimeout(i.timouts)}g=i.$content;e=i.opts.animationEffect;b=v.isNumeric(h)?h:(e?i.opts.animationDuration:0);i.$slide.off(B).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated");i.$slide.siblings().trigger("onReset").remove();if(b){f.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing")}f.hideLoading(i);f.hideControls();f.updateCursor();if(e==="zoom"&&!(j!==true&&g&&b&&i.type==="image"&&!i.hasError&&(c=f.getThumbPos(i)))){e="fade"}if(e==="zoom"){v.fancybox.stop(g);d=v.fancybox.getTranslate(g);d.width=d.width*d.scaleX;d.height=d.height*d.scaleY;k=i.opts.zoomOpacity;if(k=="auto"){k=Math.abs(i.width/i.height-c.width/c.height)>0.1}if(k){c.opacity=0}d.scaleX=d.width/c.width;d.scaleY=d.height/c.height;d.width=c.width;d.height=c.height;v.fancybox.setTranslate(i.$content,d);v.fancybox.animate(i.$content,c,b,a);return true}if(e&&b){if(j===true){setTimeout(a,b)}else{v.fancybox.animate(i.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+e,b,a)}}else{a()}return true},cleanUp:function(a){var b=this,c;b.current.$slide.trigger("onReset");b.$refs.container.empty().remove();b.trigger("afterClose",a);if(b.$lastFocus&&!!b.current.opts.backFocus){b.$lastFocus.focus()}b.current=null;c=v.fancybox.getInstance();if(c){c.activate()}else{q.scrollTop(b.scrollTop).scrollLeft(b.scrollLeft);v("html").removeClass("fancybox-enabled");v("#fancybox-style-noscroll").remove()}},trigger:function(c,f){var d=Array.prototype.slice.call(arguments,1),e=this,a=f&&f.opts?f:e.current,b;if(a){d.unshift(a)}else{a=e}d.unshift(e);if(v.isFunction(a.opts[c])){b=a.opts[c].apply(a,d)}if(b===false){return b}if(c==="afterClose"){t.trigger(c+".fb",d)}else{e.$refs.container.trigger(c+".fb",d)}},updateControls:function(c){var f=this;var b=f.current;var e=b.index;var d=b.opts;var g=d.caption;var a=f.$refs.caption;b.$slide.trigger("refresh");f.$caption=g&&g.length?a.html(g):null;if(!f.isHiddenControls){f.showControls()}v("[data-fancybox-count]").html(f.group.length);v("[data-fancybox-index]").html(e+1);v("[data-fancybox-prev]").prop("disabled",(!d.loop&&e<=0));v("[data-fancybox-next]").prop("disabled",(!d.loop&&e>=f.group.length-1))},hideControls:function(){this.isHiddenControls=true;this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var c=this;var b=c.current?c.current.opts:c.opts;var a=c.$refs.container;c.isHiddenControls=false;c.idleSecondsCounter=0;a.toggleClass("fancybox-show-toolbar",!!(b.toolbar&&b.buttons)).toggleClass("fancybox-show-infobar",!!(b.infobar&&c.group.length>1)).toggleClass("fancybox-show-nav",!!(b.arrows&&c.group.length>1)).toggleClass("fancybox-is-modal",!!b.modal);if(c.$caption){a.addClass("fancybox-show-caption ")}else{a.removeClass("fancybox-show-caption")}},toggleControls:function(){if(this.isHiddenControls){this.showControls()}else{this.hideControls()}}});v.fancybox={version:"3.1.24",defaults:w,getInstance:function(a){var c=v('.fancybox-container:not(".fancybox-is-closing"):first').data("FancyBox");var b=Array.prototype.slice.call(arguments,1);if(c instanceof A){if(v.type(a)==="string"){c[a].apply(c,b)}else{if(v.type(a)==="function"){a.apply(c,b)}}return c}return false},open:function(c,a,b){return new A(c,a,b)},close:function(a){var b=this.getInstance();if(b){b.close();if(a===true){this.close()}}},destroy:function(){this.close(true);t.off("click.fb-start")},isMobile:p.createTouch!==y&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),use3d:(function(){var a=p.createElement("div");return r.getComputedStyle&&r.getComputedStyle(a).getPropertyValue("transform")&&!(p.documentMode&&p.documentMode<11)}()),getTranslate:function(b){var d;if(!b||!b.length){return false}d=b.eq(0).css("transform");if(d&&d.indexOf("matrix")!==-1){d=d.split("(")[1];d=d.split(")")[0];d=d.split(",")}else{d=[]}if(d.length){if(d.length>10){d=[d[13],d[12],d[0],d[5]]}else{d=[d[5],d[4],d[0],d[3]]}d=d.map(parseFloat)}else{d=[0,0,1,1];var c=/\.*translate\((.*)px,(.*)px\)/i;var a=c.exec(b.eq(0).attr("style"));if(a){d[0]=parseFloat(a[2]);d[1]=parseFloat(a[1])}}return{top:d[0],left:d[1],scaleX:d[2],scaleY:d[3],opacity:parseFloat(b.css("opacity")),width:b.width(),height:b.height()}},setTranslate:function(c,b){var a="";var d={};if(!c||!b){return}if(b.left!==y||b.top!==y){a=(b.left===y?c.position().left:b.left)+"px, "+(b.top===y?c.position().top:b.top)+"px";if(this.use3d){a="translate3d("+a+", 0px)"}else{a="translate("+a+")"}}if(b.scaleX!==y&&b.scaleY!==y){a=(a.length?a+" ":"")+"scale("+b.scaleX+", "+b.scaleY+")"}if(a.length){d.transform=a}if(b.opacity!==y){d.opacity=b.opacity}if(b.width!==y){d.width=b.width}if(b.height!==y){d.height=b.height}return c.css(d)},animate:function(f,a,c,b,e){var d=B||"transitionend";if(v.isFunction(c)){b=c;c=null}if(!v.isPlainObject(a)){f.removeAttr("style")}f.on(d,function(g){if(g&&g.originalEvent&&(!f.is(g.originalEvent.target)||g.originalEvent.propertyName=="z-index")){return}f.off(d);if(v.isPlainObject(a)){if(a.scaleX!==y&&a.scaleY!==y){f.css("transition-duration","0ms");a.width=Math.round(f.width()*a.scaleX);a.height=Math.round(f.height()*a.scaleY);a.scaleX=1;a.scaleY=1;v.fancybox.setTranslate(f,a)}}else{if(e!==true){f.removeClass(a)}}if(v.isFunction(b)){b(g)}});if(v.isNumeric(c)){f.css("transition-duration",c+"ms")}if(v.isPlainObject(a)){v.fancybox.setTranslate(f,a)}else{f.addClass(a)}f.data("timer",setTimeout(function(){f.trigger("transitionend")},c+16))},stop:function(a){clearTimeout(a.data("timer"));a.off(B)}};function u(a){var b=a.currentTarget,e=a.data?a.data.options:{},g=e.selector?v(e.selector):(a.data?a.data.items:[]),d=v(b).attr("data-fancybox")||"",f=0,c=v.fancybox.getInstance();a.preventDefault();a.stopPropagation();if(c&&c.current.opts.$orig.is(b)){return}if(d){g=g.length?g.filter('[data-fancybox="'+d+'"]'):v('[data-fancybox="'+d+'"]');f=g.index(b);if(f<0){f=0}}else{g=[b]}v.fancybox.open(g,e,f)}v.fn.fancybox=function(a){var b;a=a||{};b=a.selector||false;if(b){v("body").off("click.fb-start",b).on("click.fb-start",b,{options:a},u)}else{this.off("click.fb-start").on("click.fb-start",{items:this,options:a},u)}return this};t.on("click.fb-start","[data-fancybox]",u)}(window,document,window.jQuery));(function(e){var f=function(c,b,a){if(!c){return}a=a||"";if(e.type(a)==="object"){a=e.param(a,true)}e.each(b,function(j,i){c=c.replace("$"+j,i||"")});if(a.length){c+=(c.indexOf("?")>0?"&":"?")+a}return c};var d={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:"iframe",url:"//www.metacafe.com/embed/$1/?ap=1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"iframe",url:"//www.dailymotion.com/embed/video/$1"},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:"iframe",url:"//vine.co/v/$1/embed/simple"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(a){return"//maps.google."+a[2]+"/?ll="+(a[9]?a[9]+"&z="+Math.floor(a[10])+(a[12]?a[12].replace(/^\//,"&"):""):a[12])+"&output="+(a[12]&&a[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(a){return"//maps.google."+a[2]+"/maps?q="+a[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};e(document).on("onInit.fb",function(a,b){e.each(b.group,function(s,c){var y=c.src||"",o=false,v,z,t,u,w,x,i;if(c.type){return}v=e.extend(true,{},d,c.opts.media);e.each(v,function(h,k){t=y.match(k.matcher);x={};i=h;if(!t){return}o=k.type;if(k.paramPlace&&t[k.paramPlace]){w=t[k.paramPlace];if(w[0]=="?"){w=w.substring(1)}w=w.split("&");for(var g=0;g<w.length;++g){var j=w[g].split("=",2);if(j.length==2){x[j[0]]=decodeURIComponent(j[1].replace(/\+/g," "))}}}u=e.extend(true,{},k.params,c.opts[h],x);y=e.type(k.url)==="function"?k.url.call(this,t,u,c):f(k.url,t,u);z=e.type(k.thumb)==="function"?k.thumb.call(this,t,u,c):f(k.thumb,t);if(i==="vimeo"){y=y.replace("&%23","#")}return false});if(o){c.src=y;c.type=o;if(!c.opts.thumb&&!(c.opts.$thumb&&c.opts.$thumb.length)){c.opts.thumb=z}if(o==="iframe"){e.extend(true,c.opts,{iframe:{preload:false,attr:{scrolling:"no"}}});c.contentProvider=i;c.opts.slideClass+=" fancybox-slide--"+(i=="gmap_place"||i=="gmap_search"?"map":"video")}}else{c.type="image"}})})}(window.jQuery));(function(o,n,q){var t=(function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||function(a){return o.setTimeout(a,1000/60)}})();var p=(function(){return o.cancelAnimationFrame||o.webkitCancelAnimationFrame||o.mozCancelAnimationFrame||o.oCancelAnimationFrame||function(a){o.clearTimeout(a)}})();var l=function(c){var b=[];c=c.originalEvent||c||o.e;c=c.touches&&c.touches.length?c.touches:(c.changedTouches&&c.changedTouches.length?c.changedTouches:[c]);for(var a in c){if(c[a].pageX){b.push({x:c[a].pageX,y:c[a].pageY})}else{if(c[a].clientX){b.push({x:c[a].clientX,y:c[a].clientY})}}}return b};var v=function(b,a,c){if(!a||!b){return 0}if(c==="x"){return b.x-a.x}else{if(c==="y"){return b.y-a.y}}return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))};var s=function(a){if(a.is("a,button,input,select,textarea")||q.isFunction(a.get(0).onclick)){return true}for(var b=0,c=a[0].attributes,d=c.length;b<d;b++){if(c[b].nodeName.substr(0,14)==="data-fancybox-"){return true}}return false};var u=function(c){var a=o.getComputedStyle(c)["overflow-y"];var d=o.getComputedStyle(c)["overflow-x"];var e=(a==="scroll"||a==="auto")&&c.scrollHeight>c.clientHeight;var b=(d==="scroll"||d==="auto")&&c.scrollWidth>c.clientWidth;return e||b};var r=function(b){var a=false;while(true){a=u(b.get(0));if(a){break}b=b.parent();if(!b.length||b.hasClass("fancybox-stage")||b.is("body")){break}}return a};var m=function(b){var a=this;a.instance=b;a.$bg=b.$refs.bg;a.$stage=b.$refs.stage;a.$container=b.$refs.container;a.destroy();a.$container.on("touchstart.fb.touch mousedown.fb.touch",q.proxy(a,"ontouchstart"))};m.prototype.destroy=function(){this.$container.off(".fb.touch")};m.prototype.ontouchstart=function(c){var g=this;var a=q(c.target);var b=g.instance;var d=b.current;var e=d.$content;var f=(c.type=="touchstart");if(f){g.$container.off("mousedown.fb.touch")}if(!d||g.instance.isAnimating||g.instance.isClosing){c.stopPropagation();c.preventDefault();return}if(c.originalEvent&&c.originalEvent.button==2){return}if(!a.length||s(a)||s(a.parent())){return}if(c.originalEvent.clientX>a[0].clientWidth+a.offset().left){return}g.startPoints=l(c);if(!g.startPoints||(g.startPoints.length>1&&b.isSliding)){return}g.$target=a;g.$content=e;g.canTap=true;q(n).off(".fb.touch");q(n).on(f?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",q.proxy(g,"ontouchend"));q(n).on(f?"touchmove.fb.touch":"mousemove.fb.touch",q.proxy(g,"ontouchmove"));c.stopPropagation();if(!(b.current.opts.touch||b.canPan())||!(a.is(g.$stage)||g.$stage.find(a).length)){if(a.is("img")){c.preventDefault()}return}if(!(q.fancybox.isMobile&&(r(g.$target)||r(g.$target.parent())))){c.preventDefault()}g.canvasWidth=Math.round(d.$slide[0].clientWidth);g.canvasHeight=Math.round(d.$slide[0].clientHeight);g.startTime=new Date().getTime();g.distanceX=g.distanceY=g.distance=0;g.isPanning=false;g.isSwiping=false;g.isZooming=false;g.sliderStartPos=g.sliderLastPos||{top:0,left:0};g.contentStartPos=q.fancybox.getTranslate(g.$content);g.contentLastPos=null;if(g.startPoints.length===1&&!g.isZooming){g.canTap=!b.isSliding;if(d.type==="image"&&(g.contentStartPos.width>g.canvasWidth+1||g.contentStartPos.height>g.canvasHeight+1)){q.fancybox.stop(g.$content);g.$content.css("transition-duration","0ms");g.isPanning=true}else{g.isSwiping=true}g.$container.addClass("fancybox-controls--isGrabbing")}if(g.startPoints.length===2&&!b.isAnimating&&!d.hasError&&d.type==="image"&&(d.isLoaded||d.$ghost)){g.isZooming=true;g.isSwiping=false;g.isPanning=false;q.fancybox.stop(g.$content);g.$content.css("transition-duration","0ms");g.centerPointStartX=((g.startPoints[0].x+g.startPoints[1].x)*0.5)-q(o).scrollLeft();g.centerPointStartY=((g.startPoints[0].y+g.startPoints[1].y)*0.5)-q(o).scrollTop();g.percentageOfImageAtPinchPointX=(g.centerPointStartX-g.contentStartPos.left)/g.contentStartPos.width;g.percentageOfImageAtPinchPointY=(g.centerPointStartY-g.contentStartPos.top)/g.contentStartPos.height;g.startDistanceBetweenFingers=v(g.startPoints[0],g.startPoints[1])}};m.prototype.ontouchmove=function(a){var b=this;b.newPoints=l(a);if(q.fancybox.isMobile&&(r(b.$target)||r(b.$target.parent()))){a.stopPropagation();b.canTap=false;return}if(!(b.instance.current.opts.touch||b.instance.canPan())||!b.newPoints||!b.newPoints.length){return}b.distanceX=v(b.newPoints[0],b.startPoints[0],"x");b.distanceY=v(b.newPoints[0],b.startPoints[0],"y");b.distance=v(b.newPoints[0],b.startPoints[0]);if(b.distance>0){if(!(b.$target.is(b.$stage)||b.$stage.find(b.$target).length)){return}a.stopPropagation();a.preventDefault();if(b.isSwiping){b.onSwipe()}else{if(b.isPanning){b.onPan()}else{if(b.isZooming){b.onZoom()}}}}};m.prototype.onSwipe=function(){var a=this;var b=a.isSwiping;var d=a.sliderStartPos.left||0;var c;if(b===true){if(Math.abs(a.distance)>10){a.canTap=false;if(a.instance.group.length<2&&a.instance.opts.touch.vertical){a.isSwiping="y"}else{if(a.instance.isSliding||a.instance.opts.touch.vertical===false||(a.instance.opts.touch.vertical==="auto"&&q(o).width()>800)){a.isSwiping="x"}else{c=Math.abs(Math.atan2(a.distanceY,a.distanceX)*180/Math.PI);a.isSwiping=(c>45&&c<135)?"y":"x"}}a.instance.isSliding=a.isSwiping;a.startPoints=a.newPoints;q.each(a.instance.slides,function(e,f){q.fancybox.stop(f.$slide);f.$slide.css("transition-duration","0ms");f.inTransition=false;if(f.pos===a.instance.current.pos){a.sliderStartPos.left=q.fancybox.getTranslate(f.$slide).left}});if(a.instance.SlideShow&&a.instance.SlideShow.isActive){a.instance.SlideShow.stop()}}}else{if(b=="x"){if(a.distanceX>0&&(a.instance.group.length<2||(a.instance.current.index===0&&!a.instance.current.opts.loop))){d=d+Math.pow(a.distanceX,0.8)}else{if(a.distanceX<0&&(a.instance.group.length<2||(a.instance.current.index===a.instance.group.length-1&&!a.instance.current.opts.loop))){d=d-Math.pow(-a.distanceX,0.8)}else{d=d+a.distanceX}}}a.sliderLastPos={top:b=="x"?0:a.sliderStartPos.top+a.distanceY,left:d};if(a.requestId){p(a.requestId);a.requestId=null}a.requestId=t(function(){if(a.sliderLastPos){q.each(a.instance.slides,function(f,g){var e=g.pos-a.instance.currPos;q.fancybox.setTranslate(g.$slide,{top:a.sliderLastPos.top,left:a.sliderLastPos.left+(e*a.canvasWidth)+(e*g.opts.gutter)})});a.$container.addClass("fancybox-is-sliding")}})}};m.prototype.onPan=function(){var b=this;var c,d,a;b.canTap=false;if(b.contentStartPos.width>b.canvasWidth){c=b.contentStartPos.left+b.distanceX}else{c=b.contentStartPos.left}d=b.contentStartPos.top+b.distanceY;a=b.limitMovement(c,d,b.contentStartPos.width,b.contentStartPos.height);a.scaleX=b.contentStartPos.scaleX;a.scaleY=b.contentStartPos.scaleY;b.contentLastPos=a;if(b.requestId){p(b.requestId);b.requestId=null}b.requestId=t(function(){q.fancybox.setTranslate(b.$content,b.contentLastPos)})};m.prototype.limitMovement=function(A,D,c,g){var h=this;var d,e,k,B;var f=h.canvasWidth;var b=h.canvasHeight;var C=h.contentStartPos.left;var a=h.contentStartPos.top;var i=h.distanceX;var j=h.distanceY;d=Math.max(0,f*0.5-c*0.5);e=Math.max(0,b*0.5-g*0.5);k=Math.min(f-c,f*0.5-c*0.5);B=Math.min(b-g,b*0.5-g*0.5);if(c>f){if(i>0&&A>d){A=d-1+Math.pow(-d+C+i,0.8)||0}if(i<0&&A<k){A=k+1-Math.pow(k-C-i,0.8)||0}}if(g>b){if(j>0&&D>e){D=e-1+Math.pow(-e+a+j,0.8)||0}if(j<0&&D<B){D=B+1-Math.pow(B-a-j,0.8)||0}}return{top:D,left:A}};m.prototype.limitPosition=function(c,e,d,a){var g=this;var b=g.canvasWidth;var f=g.canvasHeight;if(d>b){c=c>0?0:c;c=c<b-d?b-d:c}else{c=Math.max(0,b/2-d/2)}if(a>f){e=e>0?0:e;e=e<f-a?f-a:e}else{e=Math.max(0,f/2-a/2)}return{top:e,left:c}};m.prototype.onZoom=function(){var g=this;var D=g.contentStartPos.width;var G=g.contentStartPos.height;var b=g.contentStartPos.left;var c=g.contentStartPos.top;var d=v(g.newPoints[0],g.newPoints[1]);var F=d/g.startDistanceBetweenFingers;var j=Math.floor(D*F);var e=Math.floor(G*F);var I=(D-j)*g.percentageOfImageAtPinchPointX;var J=(G-e)*g.percentageOfImageAtPinchPointY;var i=((g.newPoints[0].x+g.newPoints[1].x)/2)-q(o).scrollLeft();var E=((g.newPoints[0].y+g.newPoints[1].y)/2)-q(o).scrollTop();var f=i-g.centerPointStartX;var h=E-g.centerPointStartY;var k=b+(I+f);var a=c+(J+h);var H={top:a,left:k,scaleX:g.contentStartPos.scaleX*F,scaleY:g.contentStartPos.scaleY*F};g.canTap=false;g.newWidth=j;g.newHeight=e;g.contentLastPos=H;if(g.requestId){p(g.requestId);g.requestId=null}g.requestId=t(function(){q.fancybox.setTranslate(g.$content,g.contentLastPos)})};m.prototype.ontouchend=function(c){var f=this;var a=Math.max((new Date().getTime())-f.startTime,1);var b=f.isSwiping;var e=f.isPanning;var d=f.isZooming;f.endPoints=l(c);f.$container.removeClass("fancybox-controls--isGrabbing");q(n).off(".fb.touch");if(f.requestId){p(f.requestId);f.requestId=null}f.isSwiping=false;f.isPanning=false;f.isZooming=false;if(f.canTap){return f.onTap(c)}f.speed=366;f.velocityX=f.distanceX/a*0.5;f.velocityY=f.distanceY/a*0.5;f.speedX=Math.max(f.speed*0.5,Math.min(f.speed*1.5,(1/Math.abs(f.velocityX))*f.speed));if(e){f.endPanning()}else{if(d){f.endZooming()}else{f.endSwiping(b)}}return};m.prototype.endSwiping=function(b){var a=this;var c=false;a.instance.isSliding=false;a.sliderLastPos=null;if(b=="y"&&Math.abs(a.distanceY)>50){q.fancybox.animate(a.instance.current.$slide,{top:a.sliderStartPos.top+a.distanceY+(a.velocityY*150),opacity:0},150);c=a.instance.close(true,300)}else{if(b=="x"&&a.distanceX>50&&a.instance.group.length>1){c=a.instance.previous(a.speedX)}else{if(b=="x"&&a.distanceX<-50&&a.instance.group.length>1){c=a.instance.next(a.speedX)}}}if(c===false&&(b=="x"||b=="y")){a.instance.jumpTo(a.instance.current.index,150)}a.$container.removeClass("fancybox-is-sliding")};m.prototype.endPanning=function(){var b=this;var c,d,a;if(!b.contentLastPos){return}if(b.instance.current.opts.touch.momentum===false){c=b.contentLastPos.left;d=b.contentLastPos.top}else{c=b.contentLastPos.left+(b.velocityX*b.speed);d=b.contentLastPos.top+(b.velocityY*b.speed)}a=b.limitPosition(c,d,b.contentStartPos.width,b.contentStartPos.height);a.width=b.contentStartPos.width;a.height=b.contentStartPos.height;q.fancybox.animate(b.$content,a,330)};m.prototype.endZooming=function(){var a=this;var c=a.instance.current;var d,g,h,e;var f=a.newWidth;var b=a.newHeight;if(!a.contentLastPos){return}d=a.contentLastPos.left;g=a.contentLastPos.top;e={top:g,left:d,width:f,height:b,scaleX:1,scaleY:1};q.fancybox.setTranslate(a.$content,e);if(f<a.canvasWidth&&b<a.canvasHeight){a.instance.scaleToFit(150)}else{if(f>c.width||b>c.height){a.instance.scaleToActual(a.centerPointStartX,a.centerPointStartY,150)}else{h=a.limitPosition(d,g,f,b);q.fancybox.setTranslate(a.content,q.fancybox.getTranslate(a.$content));q.fancybox.animate(a.$content,h,150)}}};m.prototype.onTap=function(b){var i=this;var d=q(b.target);var j=i.instance;var a=j.current;var e=(b&&l(b))||i.startPoints;var g=e[0]?e[0].x-i.$stage.offset().left:0;var h=e[0]?e[0].y-i.$stage.offset().top:0;var c;var f=function(k){var x=a.opts[k];if(q.isFunction(x)){x=x.apply(j,[a,b])}if(!x){return}switch(x){case"close":j.close(i.startEvent);break;case"toggleControls":j.toggleControls(true);break;case"next":j.next();break;case"nextOrClose":if(j.group.length>1){j.next()}else{j.close(i.startEvent)}break;case"zoom":if(a.type=="image"&&(a.isLoaded||a.$ghost)){if(j.canPan()){j.scaleToFit()}else{if(j.isScaledDown()){j.scaleToActual(g,h)}else{if(j.group.length<2){j.close(i.startEvent)}}}}break}};if(b.originalEvent&&b.originalEvent.button==2){return}if(j.isSliding){return}if(g>d[0].clientWidth+d.offset().left){return}if(d.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container")){c="Outside"}else{if(d.is(".fancybox-slide")){c="Slide"}else{if(j.current.$content&&j.current.$content.has(b.target).length){c="Content"}else{return}}}if(i.tapped){clearTimeout(i.tapped);i.tapped=null;if(Math.abs(g-i.tapX)>50||Math.abs(h-i.tapY)>50||j.isSliding){return this}f("dblclick"+c)}else{i.tapX=g;i.tapY=h;if(a.opts["dblclick"+c]&&a.opts["dblclick"+c]!==a.opts["click"+c]){i.tapped=setTimeout(function(){i.tapped=null;f("click"+c)},300)}else{f("click"+c)}}return this};q(n).on("onActivate.fb",function(a,b){if(b&&!b.Guestures){b.Guestures=new m(b)}});q(n).on("beforeClose.fb",function(a,b){if(b&&b.Guestures){b.Guestures.destroy()}})}(window,document,window.jQuery));(function(e,f){var d=function(a){this.instance=a;this.init()};f.extend(d.prototype,{timer:null,isActive:false,$button:null,speed:3000,init:function(){var a=this;a.$button=a.instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){a.toggle()});if(a.instance.group.length<2||!a.instance.group[a.instance.currIndex].opts.slideShow){a.$button.hide()}},set:function(){var a=this;if(a.instance&&a.instance.current&&(a.instance.current.opts.loop||a.instance.currIndex<a.instance.group.length-1)){a.timer=setTimeout(function(){a.instance.next()},a.instance.current.opts.slideShow.speed||a.speed)}else{a.stop();a.instance.idleSecondsCounter=0;a.instance.showControls()}},clear:function(){var a=this;clearTimeout(a.timer);a.timer=null},start:function(){var b=this;var a=b.instance.current;if(b.instance&&a&&(a.opts.loop||a.index<b.instance.group.length-1)){b.isActive=true;b.$button.attr("title",a.opts.i18n[a.opts.lang].PLAY_STOP).addClass("fancybox-button--pause");if(a.isComplete){b.set()}}},stop:function(){var b=this;var a=b.instance.current;b.clear();b.$button.attr("title",a.opts.i18n[a.opts.lang].PLAY_START).removeClass("fancybox-button--pause");b.isActive=false},toggle:function(){var a=this;if(a.isActive){a.stop()}else{a.start()}}});f(e).on({"onInit.fb":function(a,b){if(b&&!b.SlideShow){b.SlideShow=new d(b)}},"beforeShow.fb":function(a,k,b,c){var j=k&&k.SlideShow;if(c){if(j&&b.opts.slideShow.autoStart){j.start()}}else{if(j&&j.isActive){j.clear()}}},"afterShow.fb":function(a,i,b){var c=i&&i.SlideShow;if(c&&c.isActive){c.set()}},"afterKeydown.fb":function(a,l,b,c,m){var k=l&&l.SlideShow;if(k&&b.opts.slideShow&&(m===80||m===32)&&!f(e.activeElement).is("button,a,input")){c.preventDefault();k.toggle()}},"beforeClose.fb onDeactivate.fb":function(a,c){var b=c&&c.SlideShow;if(b){b.stop()}}});f(e).on("visibilitychange",function(){var b=f.fancybox.getInstance();var a=b&&b.SlideShow;if(a&&a.isActive){if(e.hidden){a.clear()}else{a.set()}}})}(document,window.jQuery));(function(e,g){var h=(function(){var i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var a;var c={};var b,d;for(b=0;b<i.length;b++){a=i[b];if(a&&a[1] in e){for(d=0;d<a.length;d++){c[i[0][d]]=a[d]}return c}}return false})();if(!h){g.fancybox.defaults.btnTpl.fullScreen=false;return}var f={request:function(a){a=a||e.documentElement;a[h.requestFullscreen](a.ALLOW_KEYBOARD_INPUT)},exit:function(){e[h.exitFullscreen]()},toggle:function(a){a=a||e.documentElement;if(this.isFullscreen()){this.exit()}else{this.request(a)}},isFullscreen:function(){return Boolean(e[h.fullscreenElement])},enabled:function(){return Boolean(e[h.fullscreenEnabled])}};g(e).on({"onInit.fb":function(b,d){var a;var c=d.$refs.toolbar.find("[data-fancybox-fullscreen]");if(d&&!d.FullScreen&&d.group[d.currIndex].opts.fullScreen){a=d.$refs.container;a.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(i){i.stopPropagation();i.preventDefault();f.toggle(a[0])});if(d.opts.fullScreen&&d.opts.fullScreen.autoStart===true){f.request(a[0])}d.FullScreen=f}else{c.hide()}},"afterKeydown.fb":function(a,d,b,c,k){if(d&&d.FullScreen&&k===70){c.preventDefault();d.FullScreen.toggle(d.$refs.container[0])}},"beforeClose.fb":function(a){if(a&&a.FullScreen){f.exit()}}});g(e).on(h.fullscreenchange,function(){var a=g.fancybox.getInstance();if(a.current&&a.current.type==="image"&&a.isAnimating){a.current.$content.css("transition","none");a.isAnimating=false;a.update(true,true,0)}})}(document,window.jQuery));(function(e,f){var d=function(a){this.instance=a;this.init()};f.extend(d.prototype,{$button:null,$grid:null,$list:null,isVisible:false,init:function(){var c=this;var a=c.instance.group[0],b=c.instance.group[1];c.$button=c.instance.$refs.toolbar.find("[data-fancybox-thumbs]");if(c.instance.group.length>1&&c.instance.group[c.instance.currIndex].opts.thumbs&&((a.type=="image"||a.opts.thumb||a.opts.$thumb)&&(b.type=="image"||b.opts.thumb||b.opts.$thumb))){c.$button.on("click",function(){c.toggle()});c.isActive=true}else{c.$button.hide();c.isActive=false}},create:function(){var c=this.instance,b,a;this.$grid=f('<div class="fancybox-thumbs"></div>').appendTo(c.$refs.container);b="<ul>";f.each(c.group,function(j,i){a=i.opts.thumb||(i.opts.$thumb?i.opts.$thumb.attr("src"):null);if(!a&&i.type==="image"){a=i.src}if(a&&a.length){b+='<li data-index="'+j+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+a+'" /></li>'}});b+="</ul>";this.$list=f(b).appendTo(this.$grid).on("click","li",function(){c.jumpTo(f(this).data("index"))});this.$list.find("img").hide().one("load",function(){var n=f(this).parent().removeClass("fancybox-thumbs-loading"),p=n.outerWidth(),o=n.outerHeight(),q,t,r,s;q=this.naturalWidth||this.width;t=this.naturalHeight||this.height;r=q/p;s=t/o;if(r>=1&&s>=1){if(r>s){q=q/s;t=o}else{q=p;t=t/r}}f(this).css({width:Math.floor(q),height:Math.floor(t),"margin-top":Math.min(0,Math.floor(o*0.3-t*0.3)),"margin-left":Math.min(0,Math.floor(p*0.5-q*0.5))}).show()}).each(function(){this.src=f(this).data("src")})},focus:function(){if(this.instance.current){this.$list.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active").focus()}},close:function(){this.$grid.hide()},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible);if(this.isVisible){if(!this.$grid){this.create()}this.instance.trigger("onThumbsShow");this.focus()}else{if(this.$grid){this.instance.trigger("onThumbsHide")}}this.instance.update()},hide:function(){this.isVisible=false;this.update()},show:function(){this.isVisible=true;this.update()},toggle:function(){this.isVisible=!this.isVisible;this.update()}});f(e).on({"onInit.fb":function(a,b){if(b&&!b.Thumbs){b.Thumbs=new d(b)}},"beforeShow.fb":function(a,j,c,b){var k=j&&j.Thumbs;if(!k||!k.isActive){return}if(c.modal){k.$button.hide();k.hide();return}if(b&&j.opts.thumbs.autoStart===true){k.show()}if(k.isVisible){k.focus()}},"afterKeydown.fb":function(a,k,b,c,l){var m=k&&k.Thumbs;if(m&&m.isActive&&l===71){c.preventDefault();m.toggle()}},"beforeClose.fb":function(a,b){var c=b&&b.Thumbs;if(c&&c.isVisible&&b.opts.thumbs.hideOnClose!==false){c.close()}}})}(document,window.jQuery));(function(l,m,o){if(!o.escapeSelector){o.escapeSelector=function(a){var c=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;var b=function(e,d){if(d){if(e==="\0"){return"\uFFFD"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e};return(a+"").replace(c,b)}}var p=true;var q=null;var k=null;function r(){var a=m.location.hash.substr(1);var b=a.split("-");var c=b.length>1&&/^\+?\d+$/.test(b[b.length-1])?parseInt(b.pop(-1),10)||1:1;var d=b.join("-");if(c<1){c=1}return{hash:a,index:c,gallery:d}}function n(b){var a;if(b.gallery!==""){a=o("[data-fancybox='"+o.escapeSelector(b.gallery)+"']").eq(b.index-1);if(!a.length){a=o("#"+o.escapeSelector(b.gallery)+"")}if(a.length){p=false;a.trigger("click")}}}function j(b){var a;if(!b){return false}a=b.current?b.current.opts:b.opts;return a.$orig?a.$orig.data("fancybox"):(a.hash||"")}o(function(){setTimeout(function(){if(o.fancybox.defaults.hash===false){return}o(l).on({"onInit.fb":function(a,d){var b,c;if(d.group[d.currIndex].opts.hash===false){return}b=r();c=j(d);if(c&&b.gallery&&c==b.gallery){d.currIndex=b.index-1}},"beforeShow.fb":function(a,d,b){var c;if(b.opts.hash===false){return}c=j(d);if(c&&c!==""){if(m.location.hash.indexOf(c)<0){d.opts.origHash=m.location.hash}q=c+(d.group.length>1?"-"+(b.index+1):"");if("replaceState" in m.history){if(k){clearTimeout(k)}k=setTimeout(function(){m.history[p?"pushState":"replaceState"]({},l.title,m.location.pathname+m.location.search+"#"+q);k=null;p=false},300)}else{m.location.hash=q}}},"beforeClose.fb":function(e,d,a){var c,b;if(k){clearTimeout(k)}if(a.opts.hash===false){return}c=j(d);b=d&&d.opts.origHash?d.opts.origHash:"";if(c&&c!==""){if("replaceState" in history){m.history.replaceState({},l.title,m.location.pathname+m.location.search+b)}else{m.location.hash=b;o(m).scrollTop(d.scrollTop).scrollLeft(d.scrollLeft)}}q=null}});o(m).on("hashchange.fb",function(){var a=r();if(o.fancybox.getInstance()){if(q&&q!==a.gallery+"-"+a.index&&!(a.index===1&&q==a.gallery)){q=null;o.fancybox.close();p=true}}else{if(a.gallery!==""){n(a)}}});n(r())},50)})}(document,window,window.jQuery));$.fn.extend({animateCss:function(c,d){this.addClass("animated "+c);this.one("animationend",function(a){$(this).removeClass("animated "+c);if(d){d()}});return this}});$(document).ready(function(){$(".search-form").on("submit",function(a){a.preventDefault();$search_mode=$("#search-mode");console.log($search_mode);$spinner=$search_mode.find(".js-spinner.product-search-spinner");$spinner.show();var b=$(this).serialize();var c=$(this).attr("action");$search_mode.show();$container=$search_mode.find(".js-results-container");$("#browse-mode").hide();$container.html("");$container.load(c+"?"+b+" #search-results",function(d){g();console.log(d);$spinner.hide();window.history.pushState("object or string","Title",c+"?"+b)})});function h(){$(".product-card-body, .product-link").fancybox({margin:[0,0],animationEffect:"fade",baseClass:"fancybox-overlay js-fix-scroll fancybox-overlay-fixed",btnTpl:{smallBtn:'<a data-fancybox-close class="close-button-base close-button-position-top-right" title="{{CLOSE}}"></a>'},spinnerTpl:'<div id="fancybox-loading"><div id="fancybox-loading-spinner"></div></div>',content:this,afterLoad:function(a){console.log(a);window.history.pushState("object or string","Title",a.current.src)},afterClose:function(){window.history.back()},clickContent:function(b,c){var a=b.opts.$orig.parent();if($(c.target).parents(".CardAction").length||$(c.target).hasClass("CardAction")){c.preventDefault();if($(c.target).parents(".CardAction").length){$btn=$(c.target).parents(".CardAction")}else{$btn=$(c.target)}var d=$btn.attr("href");$.ajax({url:d,contentType:"application/json",success:function(i){console.log(a);if(a.parents(".ProductCard").length){$ico=a.parents(".ProductCard").find(".like-action-link");active_class="is-liked";deactive_class=""}else{active_class="icon-heart-red";deactive_class="icon-heart";$ico=a.find(".like-action-icon")}console.log($ico);$like_count=a.find(".like-action-number");if("added" in i){$btn.addClass("is-liked");$ico.removeClass(deactive_class).addClass(active_class)}else{if("removed" in i){$btn.removeClass("is-liked");$ico.removeClass(active_class).addClass(deactive_class)}}$like_count.text(i.likes_count)}})}}})}function g(){h();$("#items, #search-results").on("click",function(b){console.log("asda");if($(b.target).parents(".like-action-link").length||b.target.className==="like-action-link"){b.preventDefault();console.log("sadas");if(b.target.className==="like-action-link"){$btn=$(b.target)}else{$btn=$(b.target).parents(".like-action-link")}var d=$btn.attr("href");$like_count=$btn.find(".like-action-number");var c="";var a="";if($btn.parents(".ProductCard").length){$ico=$btn;c="is-liked";a=""}else{c="icon-heart-red";a="icon-heart";$ico=$btn.find(".like-action-icon")}console.log($ico);$.ajax({url:d,contentType:"application/json",success:function(i){if("added" in i){$ico.removeClass(a).addClass(c)}else{if("removed" in i){$ico.removeClass(c).addClass(a)}}$like_count.text(i.likes_count)}})}})}g();$("#items, #search-results").on("DOMNodeInserted DOMNodeRemoved",function(a){h()});var e=function(){$(function(){var c,k,a,d,b;return d=!1,c=0.9,a=function(i){if(i.keyCode!==27){}else{if($(".PageHeader-wrapper").hasClass("is-viewingHeaderShare")){return k()}}},b=function(o){var l,u,j,s,r,i;return console.log("click"),u=$(o.target).closest(".js-headerShareCanvas"),r=$("<div class='Scrim Scrim--headerShare'></div>"),s=$(".js-headerShareButton"),i=$(".js-triggerHeaderShare"),l=$(".js-closeButtonAnimateTarget"),j=$(".js-pageHeaderCreatorAvatar"),u.append(r),l.velocity("transition.expandIn",{delay:200,duration:200,display:null}),i.velocity("transition.fadeOut",{duration:200,display:null}),j.velocity({translateY:-32,scale:0.5,opacity:0},{duration:75,display:null,ease:"ease-out"}),s.velocity("transition.expandIn",{delay:150,stagger:25,duration:150,ease:"ease-out",display:null}),r.velocity({opacity:c},{duration:400,ease:"ease-out",begin:function(){return $("body").addClass("is-viewingHeaderShare")},complete:function(){return $("body").on("keyup",a),$("body").on("click",".js-closeHeaderShare",k),$("body").addClass("is-restingHeaderShare")}})},k=function(){var r,q,j,o,i;return d?!0:(d=!0,o=$(".Scrim--headerShare"),i=$(".js-triggerHeaderShare"),r=$(".js-closeButtonAnimateTarget"),j=$(".js-headerShareButton"),q=$(".js-pageHeaderCreatorAvatar"),r.velocity("transition.fadeOut",{duration:200,display:null}),i.velocity("transition.expandIn",{delay:100,duration:200}),q.velocity({translateY:0,scale:1,opacity:1},{delay:150,duration:100,display:null,ease:"ease-out"}),j.velocity("transition.expandOut",{stagger:50,duration:300,display:null,ease:"ease-out",backwards:null,begin:function(){return $("body").removeClass("is-restingHeaderShare")},complete:function(){return $("body").removeClass("is-viewingHeaderShare"),$("body").off("click",".js-closeHeaderShare",k),$("body").off("keyup",a),o.remove(),d=!1}}),o.velocity({opacity:0},{duration:400,ease:"ease-out"}))},$("body").on("click",".js-triggerHeaderShare",b)})}.call(this);var f=function(){var a,b=function(c,d){return function(){return c.apply(d,arguments)}};$(function(){return window.searchController=new a,searchController.searchOnLoad(),$(document.body).on("click",".js-cancelSearchMode",function(){return $(document).trigger("Search:showSearchMode",!1)})}),a=function(){function c(){this.searchDispatch=b(this.searchDispatch,this),this.$document=$(document),this.$browseMode=$("#browse-mode"),this.$searchMode=$("#search-mode"),this.pendingSearches={},this.inSearchMode=!1,this.previousScrollPos=null,this.initListeners()}return c.prototype.initListeners=function(){return this.$document.on("Search:requestSearch",function(d){return function(k,i){return d.searchDispatch(i)}}(this)),this.$document.on("Search:showSearchMode",function(d){return function(k,i){return d.showSearchMode(i)}}(this)),this.$document.on("Search:requestMobileSearch",function(d){return function(k,i){return d.showMobileSearchInput(i)}}(this)),window.addEventListener("popstate",function(d){return function(i){return i.state&&i.state.query?(d.showSearchMode(!0),d.searchDispatch(query)):(d.showSearchMode(!1),d.$document.trigger("Search:requestClearSearchInput"),$(".js-globalSearchInput").blur())}}(this))},c.prototype.searchOnLoad=function(){var d,k;return window.location.pathname.indexOf("/search")>-1&&(d=window.location.search.parseQueryString(),d.q)?(k=d.q,$(document).trigger("Search:updateQuery",k),$(document).trigger("Search:requestSearch",k)):void 0},c.prototype.showMobileSearchInput=function(d){return d?document.body.classList.add("is-showingMobileSearchInput"):(document.body.classList.remove("is-showingMobileSearchInput"),this.clearSearchResults(),this.showSearchMode(!1),this.$document.trigger("Search:requestClearSearchInput"),$("#mobileSearchInput").focus())},c.prototype.showSearchMode=function(d){return d?(this.previousScrollPos=this.$document.scrollTop(),this.$browseMode.hide(),this.$searchMode.show(),this.inSearchMode=!0):(this.$browseMode.show(),this.$document.scrollTop(this.previousScrollPos),this.$searchMode.hide(),this.inSearchMode=!1)},c.prototype.clearSearchResults=function(){return $("#search-container").html("")},c.prototype.search=function(o,q){var d,p,n;return d=$(".js-"+o+"-search-section"),d.show(),d.find(".js-empty-state").hide(),d.find(".js-spinner").show(),d.find(".js-results-container").hide(),d.find(".js-message").hide(),p=function(){return function(i){var j;return d.find(".js-spinner").hide(),j=$(i.trim()),0===j.length?d.find(".js-empty-state").show():(d.find(".js-empty-state").hide(),d.find(".js-results-container").html(i),d.find(".js-results-container").show(),d.find(".js-message").show(),ReactRailsUJS.mountComponents()),setUpSmoothScroll()}}(this),null!=(n=this.pendingSearches[o])&&n.abort(),this.pendingSearches[o]=$.ajax("/ajax/"+o+"_search",{dataType:"html",data:{query:q},success:p})},c.prototype.searchDispatch=function(d){var n,r,i,s,o;return $(".js-asin-search-section").hide(),$(".js-amazon-search-section").hide(),$(".js-product-search-section").hide(),$(".js-canopy-search-section").hide(),this.inSearchMode||this.clearSearchResults(),(null!=d?d.length:void 0)>0?(this.clearSearchResults(),this.showSearchMode(!0)):this.showSearchMode(!1),d=d.trim(),r="Searched",s={originating:!0,query:d},SegmentAnalytics.canopyTrack(r,s),o=encodeURI(d.trim()),window.history.pushState({query:d},"Search: query","/search?q="+o),i=d.match("/([A-Z0-9]{10})(/|\\?|$)"),n=d.match(/canopy\.co.*\/products\/([0-9]+)/),i?this.search("asin",i[1]):n?this.search("canopy",n[1]):this.search("product",d),$("body").animate({scrollTop:-$($(".search-summary")[0]).offset().top},200)},c}()}.call(this);$(".NavAction--showSearch").on("click",function(){return $(document).trigger("Search:requestMobileSearch",!0)});$(".GlobalNav-cancelMobileSearch").on("click",function(){return $(document).trigger("Search:requestMobileSearch",!1)});$("#filter-form input[type='radio']").on("change",function(){$form=$(this).parents("form");var c=$form.attr("action");var a=$form.attr("method");var b=$form.serialize();$items=$("#items");$items.html('<div class="js-spinner product-search-spinner">\n    <div class="vertical-center-outer">\n        <div class="vertical-center-inner">\n            <div class="product-loader-icon search animated spin">\n                <span>\n                    Loading...\n                </span>\n            </div>\n        </div>\n    </div>\n</div>');$.ajax({url:c,method:a,data:b,success:function(d){setTimeout(function(){$items.html(d)},300)},error:function(d){alert("На сервере произошла ошибка, извините за временные неудобства");$items.remove(".product-search-spinner")}})})});